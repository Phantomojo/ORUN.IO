<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Earth Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        #main-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        .controls {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
        
        .controls button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 5px 10px;
            margin: 2px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .controls button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <div id="main-container">
        <div class="controls">
            <div>Simple Earth Viewer</div>
            <button onclick="toggleRotation()">Toggle Rotation</button>
            <button onclick="changeView()">Change View</button>
            <button onclick="toggleAtmosphere()">Toggle Atmosphere</button>
        </div>
    </div>

    <!-- Load Three.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        let scene, camera, renderer, earth, atmosphere;
        let isRotating = true;
        let currentView = 0;
        let showAtmosphere = true;
        
        // Create realistic Earth texture
        function createRealisticEarthTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            // Create ocean background
            const oceanGradient = ctx.createRadialGradient(512, 256, 0, 512, 256, 500);
            oceanGradient.addColorStop(0, '#1e3a8a');
            oceanGradient.addColorStop(0.5, '#3b82f6');
            oceanGradient.addColorStop(1, '#1e40af');
            
            ctx.fillStyle = oceanGradient;
            ctx.fillRect(0, 0, 1024, 512);
            
            // Add continents
            ctx.fillStyle = '#2d5016';
            // Africa
            ctx.beginPath();
            ctx.ellipse(512, 300, 100, 150, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // Europe
            ctx.fillStyle = '#3a5f2a';
            ctx.beginPath();
            ctx.ellipse(475, 200, 75, 50, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // Asia
            ctx.fillStyle = '#2d5016';
            ctx.beginPath();
            ctx.ellipse(600, 225, 150, 100, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // North America
            ctx.fillStyle = '#3a5f2a';
            ctx.beginPath();
            ctx.ellipse(150, 150, 125, 100, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // South America
            ctx.fillStyle = '#2d5016';
            ctx.beginPath();
            ctx.ellipse(200, 350, 75, 125, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // Australia
            ctx.fillStyle = '#3a5f2a';
            ctx.beginPath();
            ctx.ellipse(700, 375, 60, 40, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.wrapS = THREE.RepeatWrapping;
            texture.wrapT = THREE.ClampToEdgeWrapping;
            return texture;
        }
        
        // Create night texture
        function createNightTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = '#000000';
            ctx.fillRect(0, 0, 1024, 512);
            
            // Add city lights
            ctx.fillStyle = '#ffffff';
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * 1024;
                const y = Math.random() * 512;
                const size = Math.random() * 2 + 1;
                
                ctx.beginPath();
                ctx.arc(x, y, size, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.wrapS = THREE.RepeatWrapping;
            texture.wrapT = THREE.ClampToEdgeWrapping;
            return texture;
        }
        
        // Create cloud texture
        function createCloudTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, 1024, 512);
            
            ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
            for (let i = 0; i < 25; i++) {
                const x = Math.random() * 1024;
                const y = Math.random() * 512;
                const size = Math.random() * 50 + 25;
                
                ctx.beginPath();
                ctx.arc(x, y, size, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.wrapS = THREE.RepeatWrapping;
            texture.wrapT = THREE.ClampToEdgeWrapping;
            return texture;
        }
        
        // Initialize the Earth viewer
        function initEarthViewer() {
            // Create scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000011);
            
            // Create camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            
            // Create renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('main-container').appendChild(renderer.domElement);
            
            // Create Earth geometry
            const geometry = new THREE.SphereGeometry(2, 64, 32);
            
            // Create Earth material
            const material = new THREE.MeshPhongMaterial({
                map: createRealisticEarthTexture(),
                shininess: 100,
                specular: 0x222222,
                transparent: true,
                opacity: 0.9
            });
            
            // Create Earth mesh
            earth = new THREE.Mesh(geometry, material);
            earth.castShadow = true;
            earth.receiveShadow = true;
            scene.add(earth);
            
            // Create night Earth
            const nightMaterial = new THREE.MeshBasicMaterial({
                map: createNightTexture(),
                transparent: true,
                opacity: 0.3,
                blending: THREE.AdditiveBlending
            });
            const nightEarth = new THREE.Mesh(geometry, nightMaterial);
            scene.add(nightEarth);
            
            // Create cloud layer
            const cloudMaterial = new THREE.MeshBasicMaterial({
                map: createCloudTexture(),
                transparent: true,
                opacity: 0.4
            });
            const cloudEarth = new THREE.Mesh(geometry, cloudMaterial);
            cloudEarth.scale.setScalar(1.01);
            scene.add(cloudEarth);
            
            // Create atmosphere
            const atmosphereGeometry = new THREE.SphereGeometry(2.1, 32, 16);
            const atmosphereMaterial = new THREE.MeshBasicMaterial({
                color: 0x3b82f6,
                transparent: true,
                opacity: 0.1,
                side: THREE.BackSide
            });
            atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
            scene.add(atmosphere);
            
            // Add lighting
            const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);
            directionalLight.position.set(5, 3, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // Add point light
            const pointLight = new THREE.PointLight(0xffffff, 0.5, 100);
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                
                if (isRotating) {
                    earth.rotation.y += 0.005;
                    nightEarth.rotation.y += 0.005;
                    cloudEarth.rotation.y += 0.003;
                    if (showAtmosphere) {
                        atmosphere.rotation.y += 0.002;
                    }
                }
                
                renderer.render(scene, camera);
            }
            
            animate();
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }
        
        // Control functions
        function toggleRotation() {
            isRotating = !isRotating;
        }
        
        function changeView() {
            currentView = (currentView + 1) % 3;
            switch(currentView) {
                case 0:
                    camera.position.set(0, 0, 5);
                    break;
                case 1:
                    camera.position.set(5, 0, 0);
                    break;
                case 2:
                    camera.position.set(0, 5, 0);
                    break;
            }
            camera.lookAt(0, 0, 0);
        }
        
        function toggleAtmosphere() {
            showAtmosphere = !showAtmosphere;
            atmosphere.visible = showAtmosphere;
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                initEarthViewer();
            }, 500);
        });
    </script>
</body>
</html>
