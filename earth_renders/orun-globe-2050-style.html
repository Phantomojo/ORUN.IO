<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORUN Globe - 2050.earth Style</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        #container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        #info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #00ff00;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
            font-size: 14px;
        }
        
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00ff00;
            font-size: 18px;
            z-index: 1000;
        }
        
        .controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #00ff00;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
        }
        
        .controls button {
            background: #333;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 8px 16px;
            margin: 4px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .controls button:hover {
            background: #00ff00;
            color: #000;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="loading">Loading ORUN Globe - 2050.earth Style...</div>
        <div id="info" style="display: none;">
            <h3>ORUN GLOBE - 2050.EARTH STYLE</h3>
            <p>Black background, green wireframe continents</p>
            <p>FPS: <span id="fps">0</span></p>
            <p>Data Points: <span id="dataPoints">0</span></p>
        </div>
        <div class="controls" style="display: none;">
            <button onclick="toggleRotation()">Toggle Rotation</button>
            <button onclick="toggleDataPoints()">Toggle Data Points</button>
            <button onclick="resetCamera()">Reset Camera</button>
            <button onclick="changeYear()">Change Year</button>
        </div>
    </div>

    <!-- Three.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        // Global variables
        let scene, camera, renderer, controls;
        let earth, dataPoints, wireframeSphere;
        let isRotating = true;
        let dataPointsVisible = true;
        let currentYear = 2050;
        let stats = { fps: 0, dataPointCount: 0 };
        
        // 2050.earth style color (exact match)
        const EARTH_COLOR = 0x31a6f7; // 3257463 in decimal
        
        // Initialize the application
        function init() {
            console.log('Initializing ORUN Globe - 2050.earth Style...');
            
            // Create scene with black background
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            
            // Create camera
            camera = new THREE.PerspectiveCamera(
                60, 
                window.innerWidth / window.innerHeight, 
                0.1, 
                1000
            );
            camera.position.set(0, 0, 15);
            
            // Create renderer
            renderer = new THREE.WebGLRenderer({ 
                antialias: true,
                alpha: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('container').appendChild(renderer.domElement);
            
            // Create controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.autoRotate = true;
            controls.autoRotateSpeed = 0.5;
            controls.minDistance = 8;
            controls.maxDistance = 50;
            controls.minPolarAngle = 0.1;
            controls.maxPolarAngle = Math.PI - 0.1;
            
            // Add minimal lighting
            setupLighting();
            
            // Create Earth wireframe (2050.earth style)
            createEarthWireframe();
            
            // Create data points
            createDataPoints();
            
            // Handle window resize
            window.addEventListener('resize', onWindowResize, false);
            
            // Start animation loop
            animate();
            
            // Hide loading and show UI
            document.getElementById('loading').style.display = 'none';
            document.getElementById('info').style.display = 'block';
            document.querySelector('.controls').style.display = 'block';
            
            console.log('ORUN Globe - 2050.earth Style initialized successfully!');
        }
        
        function setupLighting() {
            // Minimal ambient light
            const ambientLight = new THREE.AmbientLight(0x404040, 0.2);
            scene.add(ambientLight);
            
            // Directional light for wireframe visibility
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);
        }
        
        function createEarthWireframe() {
            // Create Earth geometry
            const geometry = new THREE.SphereGeometry(5, 32, 32);
            
            // Create wireframe material with 2050.earth color
            const material = new THREE.MeshBasicMaterial({
                color: EARTH_COLOR,
                wireframe: true,
                transparent: true,
                opacity: 0.8
            });
            
            // Create Earth mesh
            earth = new THREE.Mesh(geometry, material);
            scene.add(earth);
            
            // Create a second wireframe sphere for depth effect
            const geometry2 = new THREE.SphereGeometry(5.02, 32, 32);
            const material2 = new THREE.MeshBasicMaterial({
                color: EARTH_COLOR,
                wireframe: true,
                transparent: true,
                opacity: 0.3
            });
            
            wireframeSphere = new THREE.Mesh(geometry2, material2);
            scene.add(wireframeSphere);
            
            console.log('Earth wireframe created with 2050.earth style');
        }
        
        function createDataPoints() {
            // Create data points in 2050.earth style
            const points = [];
            const colors = [];
            
            // Generate points on land areas (simplified)
            for (let i = 0; i < 200; i++) {
                const phi = Math.acos(2 * Math.random() - 1);
                const theta = 2 * Math.PI * Math.random();
                
                // Simulate land areas (not uniform distribution)
                const isLand = Math.random() > 0.7; // 30% chance of being on land
                
                if (isLand) {
                    const x = 5.1 * Math.sin(phi) * Math.cos(theta);
                    const y = 5.1 * Math.sin(phi) * Math.sin(theta);
                    const z = 5.1 * Math.cos(phi);
                    
                    points.push(x, y, z);
                    colors.push(0.2, 0.8, 0.2); // Green color
                }
            }
            
            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(points, 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            
            const material = new THREE.PointsMaterial({
                size: 0.15,
                vertexColors: true,
                transparent: true,
                opacity: 0.9
            });
            
            dataPoints = new THREE.Points(geometry, material);
            scene.add(dataPoints);
            
            stats.dataPointCount = points.length / 3;
            console.log('Data points created:', stats.dataPointCount);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Update controls
            controls.update();
            
            // Rotate Earth if enabled
            if (isRotating && earth) {
                earth.rotation.y += 0.005;
                if (wireframeSphere) {
                    wireframeSphere.rotation.y += 0.003;
                }
            }
            
            // Update stats
            updateStats();
            
            // Render scene
            renderer.render(scene, camera);
        }
        
        function updateStats() {
            stats.fps = Math.round(1000 / (performance.now() - (stats.lastTime || performance.now())));
            stats.lastTime = performance.now();
            
            document.getElementById('fps').textContent = stats.fps;
            document.getElementById('dataPoints').textContent = stats.dataPointCount;
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // Control functions
        function toggleRotation() {
            isRotating = !isRotating;
            controls.autoRotate = isRotating;
        }
        
        function toggleDataPoints() {
            dataPointsVisible = !dataPointsVisible;
            if (dataPoints) {
                dataPoints.visible = dataPointsVisible;
            }
        }
        
        function resetCamera() {
            camera.position.set(0, 0, 15);
            controls.reset();
        }
        
        function changeYear() {
            currentYear = currentYear === 2050 ? 2040 : 2050;
            document.getElementById('info').innerHTML = `
                <h3>ORUN GLOBE - 2050.EARTH STYLE</h3>
                <p>Year: ${currentYear}</p>
                <p>Black background, green wireframe continents</p>
                <p>FPS: <span id="fps">${stats.fps}</span></p>
                <p>Data Points: <span id="dataPoints">${stats.dataPointCount}</span></p>
            `;
            console.log('Year changed to:', currentYear);
        }
        
        // Initialize when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>
